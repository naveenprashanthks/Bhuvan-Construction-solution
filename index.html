<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Bhuvan Construction — Home</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#f8b400;
    --dark:#0f1724;
    --muted:#ffffff;
    --glass: rgba(255,255,255,0.06);
    --white:#ffffff
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{background:linear-gradient(180deg,#0f1724 0%, #0b1220 55%, #071021 100%);color:#e6eef8;overflow-y:auto;-webkit-font-smoothing:antialiased;}

  /* Header */
  header{
    position:fixed;left:0;right:0;top:0;height:68px;padding:10px 28px;display:flex;align-items:center;justify-content:space-between;
    backdrop-filter: blur(8px); z-index:40;
  }
  .brand{display:flex;gap:12px;align-items:center}
  .logo{
    width:44px;height:44px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#ff7a00);
    box-shadow:0 6px 20px rgba(248,180,0,0.18);font-weight:800;color:#08101a;
    font-size:15px;
  }
  nav a{color:rgba(230,238,248,0.9);text-decoration:none;margin-left:18px;font-weight:600}
  nav a:hover{color:var(--accent)}

  /* Hero - 3D canvas area */
  
  .hero {
    height:100vh;min-height:620px;padding-top:68px;display:flex;flex-direction:column;
  }
  .hero-video {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;   /* makes video cover full area */
  z-index: -1;         /* keep it behind overlays */
}

  .stage{
    position:relative;height:calc(100vh - 68px);max-height:1200px;overflow:hidden;
  }
  .hero-content {
  position: relative;
  z-index: 1; /* above video */
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: #fff;
}

.hero-logo {
  max-width: 180px;  /* adjust as needed */
  margin-bottom: 20px;
}

  /* overlay UI on hero */
  .hero-ui{
    position:absolute;left:28px;top:110px;z-index:30;max-width:520px;
    background:linear-gradient(180deg, rgba(10,12,18,0.48), rgba(8,10,14,0.32));
    border-radius:14px;padding:20px;border:1px solid rgba(255,255,255,0.04);
    backdrop-filter: blur(6px);
    box-shadow: 0 10px 30px rgba(2,6,12,0.6);
  }
  .hero-ui h1{font-size:34px;margin:0 0 8px 0;line-height:1.02}
  .hero-ui p{color:var(--muted);margin:0 0 14px 0}
  .cta-row{display:flex;gap:12px;align-items:center}
  .btn{padding:10px 16px;border-radius:10px;border:none;font-weight:700;cursor:pointer;}
  .btn-primary{background:linear-gradient(90deg,var(--accent),#ff7a00);color:#07101a;box-shadow: 0 8px 30px rgba(248,180,0,0.14);}
  .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e6eef8}

  /* Stats bar */
  .stats-bar{display:flex;gap:16px;position:absolute;right:28px;top:110px;z-index:30}
  .stat{background:var(--glass);padding:12px 18px;border-radius:12px;min-width:120px;text-align:center;border:1px solid rgba(255,255,255,0.03)}
  .stat .num{font-weight:800;font-size:20px;color:var(--muted)}
  .stat .label{font-size:12px;color:var(--muted)}

  /* Sections */
  section{padding:60px 6vw;color: #e6eef8}
  .section-title{display:flex;align-items:end;gap:12px;margin-bottom:18px}
  .section-title h2{margin:0;font-size:28px;letter-spacing:0.2px}
  .section-title p{color:var(--muted);font-size:13px;margin:0}

  /* Showcase grid */
  .showcase-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
  .card{
    border-radius:14px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));
    border:1px solid rgba(255,255,255,0.03);padding:0;transition:transform .45s, box-shadow .35s;
  }
  .card img{width:100%;height:220px;object-fit:cover;display:block;transform-origin:center center;transition:transform .5s;}
  .card .meta{padding:14px}
  .card:hover{transform:translateY(-10px);box-shadow: 0 18px 40px rgba(1,6,20,0.6)}
  .card:hover img{transform:scale(1.06) rotate(-0.6deg)}

  /* Animated counters small */
  .counters{display:flex;gap:20px;flex-wrap:wrap}
  .counter{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;min-width:150px;text-align:center}
  .counter .big{font-size:28px;font-weight:800;color:var(--accent)}
  .counter .lbl{font-size:12px;color:var(--muted)}

  /* Parallax CTA strip */
  .cta-strip{display:flex;justify-content:space-between;align-items:center;padding:30px;border-radius:12px;background:linear-gradient(90deg,#071021, #0b1626);border:1px solid rgba(255,255,255,0.03);margin-top:24px}
  .cta-strip p{margin:0;color:var(--muted)}
  .cta-strip .big-cta{font-weight:800;color:#fff;font-size:20px}

  /* Floating buttons */
  .floating{
    position:fixed;right:18px;bottom:18px;display:flex;flex-direction:column;gap:12px;z-index:60;
  }
  .float-btn{width:56px;height:56px;border-radius:14px;display:grid;place-items:center;text-decoration:none;color:#07101a;font-weight:800}
  .float-wa{background:linear-gradient(180deg,#25D366,#1fa84a);box-shadow: 0 10px 30px rgba(37,211,102,0.12)}
  .float-call{background:linear-gradient(180deg,#4dc3ff,#2196f3);box-shadow: 0 10px 30px rgba(33,150,243,0.12)}
  .float-call, .float-wa{color:#fff;font-size:22px}

  /* Footer */
  footer{padding:24px;text-align:center;color:var(--muted);font-size:13px}

  /* Responsiveness */
  @media (max-width:1000px){
    .showcase-grid{grid-template-columns:repeat(2,1fr)}
    .hero-ui{left:18px;right:18px;top:80px;max-width:unset}
    .stats-bar{display:none}
  }
  @media (max-width:640px){
    nav{display:none}
    .hero-ui{top:70px;padding:14px}
    .hero-ui h1{font-size:22px}
    .hero-ui p{font-size:13px}
    .showcase-grid{grid-template-columns:1fr}
    .card img{height:180px}
    .stat{min-width:unset;padding:8px 12px}
  }

  /* small polish */
  .reveal{opacity:0;transform:translateY(18px);transition:all .7s cubic-bezier(.2,.9,.3,1)}
  .reveal.show{opacity:1;transform:none}

  .site-header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  padding: 15px 30px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 10;
  background: transparent; /* keep video visible */
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
}

.brand-logo {
  height: 50px;
  width: auto;
}

nav a {
  margin-left: 20px;
  color: #fff;
  text-decoration: none;
  font-weight: 500;
}

nav a:hover {
  text-decoration: underline;
}

</style>
</head>
<body>

<header class="site-header">
  <div class="brand">
    <img src="LOGO 1.png" alt="Bhuvan Construction Logo" class="brand-logo">
    <div class="brand-text">
      <div style="font-weight:700">Bhuvan Construction</div>
      <div style="font-size:12px;color:var(--muted)">Construction & Solutions</div>
    </div>
  </div>

  <nav aria-label="Main navigation">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="services.html">Services</a>
    <a href="gallery.html">Gallery</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>


<main>
    
  <!-- HERO / 3D STAGE -->
  <section class="hero" id="hero">
    <div class="stage" id="stage">
      <!-- Three.js canvas will be injected here -->
      <canvas id="three-canvas" style="display:block;width:100%;height:100%"></canvas>
        <video autoplay muted loop playsinline class="hero-video">
    <source src="Tamil_Nadu_Miniature_Construction_Drone_Shot.mp4" type="video/mp4" />
    Your browser does not support the video tag.
  </video>
  <div class="hero-content">
  <img src="LOGO 1.png" alt="Bhuvan Construction Logo" class="hero-logo">
  <h1>Bhuvan Construction & Solutions</h1>
  <p>Building Trust. Delivering Quality.</p>
</div>

      <!-- Overlay UI (left) -->
      <div class="hero-ui" id="heroUi">
        <h1>We build durable spaces — with care & craft</h1>
        <p>Turnkey construction, smart design, renovation and civil contracting. Modern techniques, local trust.</p>
        <div class="cta-row">
          <button class="btn btn-primary" id="enquireBtn">Get A Quote</button>
          <button class="btn btn-ghost" id="viewWorks">View Projects</button>
        </div>
      </div>

      <!-- Overlay stats (right) -->
      <div class="stats-bar" aria-hidden="true">
        <div class="stat">
          <div class="num" data-target="200">0</div>
          <div class="label">Projects</div>
        </div>
        <div class="stat">
          <div class="num" data-target="150">0</div>
          <div class="label">Clients</div>
        </div>
        <div class="stat">
          <div class="num" data-target="18">0</div>
          <div class="label">Years</div>
        </div>
      </div>
    </div>
  </section>

  <!-- About-style counters (scroll) -->
  <section>
    <div class="section-title">
      <h2>Why choose us</h2>
      <p>Precision, safety, timely delivery — backed by measurable results</p>
    </div>

    <div class="counters reveal">
      <div class="counter">
        <div class="big" data-target="98">0</div>
        <div class="lbl">Quality Score (%)</div>
      </div>
      <div class="counter">
        <div class="big" data-target="24">0</div>
        <div class="lbl">Trusted Locations</div>
      </div>
      <div class="counter">
        <div class="big" data-target="4.8">0</div>
        <div class="lbl">Avg. Rating (out of 5)</div>
      </div>
    </div>

    <div class="reveal" style="margin-top:22px">
      <div style="max-width:900px">
        <p style="color:var(--muted)">
          We combine practical engineering with modern design practices, delivering projects that stand the test of time.
          Our team handles everything from foundation to finish — local permits, quality materials, and a clear communication line.
        </p>
      </div>
    </div>
  </section>

  <!-- Showcase -->
  <section>
    <div class="section-title">
      <h2>Showcase</h2>
      <p>Snapshot of our recent works — high fidelity photos and real sites</p>
    </div>

    <div class="showcase-grid">
      <div class="card reveal">
        <img loading="lazy" src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=1200&auto=format&fit=crop" alt="Site 1">
        <div class="meta">
          <strong>Residential Block — Phase I</strong>
          <div style="color:var(--muted);font-size:13px;margin-top:6px">Full structural + interior fit-out</div>
        </div>
      </div>
      <div class="card reveal">
        <img loading="lazy" src="https://images.unsplash.com/photo-1524758631624-e2822e304c36?q=80&w=1200&auto=format&fit=crop" alt="Design">
        <div class="meta">
          <strong>Office Complex — Smart Design</strong>
          <div style="color:var(--muted);font-size:13px;margin-top:6px">Energy efficient materials & MEP</div>
        </div>
      </div>
      <div class="card reveal">
        <img loading="lazy" src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1200&auto=format&fit=crop" alt="Renovation">
        <div class="meta">
          <strong>Renovation — Heritage Home</strong>
          <div style="color:var(--muted);font-size:13px;margin-top:6px">Preservation + modern amenities</div>
        </div>
      </div>
    </div>

    <div class="cta-strip reveal" style="margin-top:26px">
      <div>
        <div class="big-cta">Ready to start your project?</div>
        <p>Request a free site visit and estimate — we’ll respond within 24 hours.</p>
      </div>
      <div>
        <button class="btn btn-primary" id="startNow">Request Visit</button>
      </div>
    </div>
  </section>

  <!-- Large step-by-step visual (mock) -->
  <section>
    <div class="section-title">
      <h2>How we work</h2>
      <p>Clear phases — transparent billing — regular updates</p>
    </div>

    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px" class="reveal">
      <div class="card" style="padding:18px;text-align:center;">
        <div style="font-weight:800;font-size:18px">01</div>
        <div style="margin-top:10px;font-weight:700">Plan</div>
        <div style="color:var(--muted);margin-top:8px;font-size:13px">Site survey & proposal</div>
      </div>
      <div class="card" style="padding:18px;text-align:center;">
        <div style="font-weight:800;font-size:18px">02</div>
        <div style="margin-top:10px;font-weight:700">Procure</div>
        <div style="color:var(--muted);margin-top:8px;font-size:13px">Materials & approvals</div>
      </div>
      <div class="card" style="padding:18px;text-align:center;">
        <div style="font-weight:800;font-size:18px">03</div>
        <div style="margin-top:10px;font-weight:700">Execute</div>
        <div style="color:var(--muted);margin-top:8px;font-size:13px">Skilled teams & safety</div>
      </div>
      <div class="card" style="padding:18px;text-align:center;">
        <div style="font-weight:800;font-size:18px">04</div>
        <div style="margin-top:10px;font-weight:700">Handover</div>
        <div style="color:var(--muted);margin-top:8px;font-size:13px">Testing & walkthrough</div>
      </div>
    </div>
  </section>

  <footer>
    © <span id="yr"></span> Bhuvan Construction and Solution • All rights reserved • <span style="color:var(--muted)">+91 63814 43149</span>
  </footer>
</main>

<!-- Floating buttons -->
<div class="floating" aria-hidden="false">
  <a class="float-btn float-wa" href="https://wa.me/916381443149" target="_blank" title="WhatsApp">
    <!-- whatsapp icon simple -->
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
      <path d="M20.52 3.48A11.94 11.94 0 0012 0C5.373 0 .009 5.373 0 12 0 14.137.58 16.134 1.66 17.741L0 24l6.41-1.633A11.94 11.94 0 0012 24c6.627 0 12-5.373 12-12 0-3.204-1.252-6.238-3.48-8.52z" fill="#fff" opacity=".06"/>
      <path d="M17.472 14.382c-.297-.15-1.758-.867-2.03-.967-.273-.1-.472-.148-.672.15-.198.297-.768.967-.942 1.166-.173.198-.347.223-.644.074-.297-.15-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.058-.173-.297-.018-.458.13-.606.134-.133.298-.347.447-.52.151-.173.2-.298.3-.497.1-.198.05-.372-.025-.522-.075-.15-.672-1.62-.922-2.223-.242-.584-.487-.502-.672-.512l-.574-.01c-.198 0-.52.074-.794.372s-1.04 1.016-1.04 2.479 1.064 2.876 1.212 3.074c.15.198 2.096 3.2 5.077 4.487.71.306 1.262.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414-.074-.123-.272-.198-.57-.347z" fill="#fff"/>
    </svg>
  </a>
  <a class="float-btn float-call" href="tel:+916381443149" title="Call">
    <!-- phone icon -->
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
      <path d="M6.6 10.2c1.5 3.1 4.1 5.7 7.2 7.2l2.1-2.1c.3-.3.8-.4 1.1-.2 1.2.5 2.5.8 3.9.8.6 0 1 .5 1 1V21c0 .6-.4 1-1 1C10.7 22 2 13.3 2 2c0-.6.4-1 1-1h3.6c.6 0 1 .4 1 1 0 1.4.3 2.7.8 3.9.2.4.1.9-.2 1.1L6.6 10.2z" fill="#fff"/>
    </svg>
  </a>
</div>

<!-- THREE.JS from CDN -->
<script src="https://unpkg.com/three@0.154.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.154.0/examples/js/controls/OrbitControls.js"></script>

<script>
/* ---------- small helpers ---------- */
document.getElementById('yr').textContent = new Date().getFullYear();

/* Smooth reveal on scroll */
const revealEls = document.querySelectorAll('.reveal, .stat, .card, .counters, .hero-ui, .stats-bar');
const onScroll = () => {
  revealEls.forEach(el=>{
    const r = el.getBoundingClientRect();
    if(r.top < window.innerHeight - 80) el.classList.add('show');
  });
};
window.addEventListener('scroll', onScroll, {passive:true});
onScroll();

/* Animated counters */
function animateNumber(el, target, duration=1000, decimals=0){
  let start = 0;
  const startTime = performance.now();
  const tick = (t) => {
    const delta = Math.min(1, (t - startTime) / duration);
    const val = start + (target - start) * (0.5 - Math.cos(Math.PI * delta) / 2); // smooth
    el.textContent = parseFloat(val).toFixed(decimals);
    if(delta < 1) requestAnimationFrame(tick);
  };
  requestAnimationFrame(tick);
}
const nums = document.querySelectorAll('.num');
nums.forEach(n=>{
  const target = parseFloat(n.dataset.target);
  const io = new IntersectionObserver(entries=>{
    if(entries[0].isIntersecting){ animateNumber(n, target, 1200, Number.isInteger(target) ? 0 : 1); io.disconnect();}
  }, {threshold:0.5});
  io.observe(n);
});
const bigs = document.querySelectorAll('.counter .big');
bigs.forEach(b=>{
  const t = parseFloat(b.dataset.target);
  const io = new IntersectionObserver(entries=>{
    if(entries[0].isIntersecting){ animateNumber(b, t, 1200, (t % 1 === 0) ? 0 : 1); io.disconnect();}
  }, {threshold:0.5});
  io.observe(b);
});

/* CTA buttons scroll to sections */
document.getElementById('viewWorks').addEventListener('click', ()=>{ window.scrollTo({top: window.innerHeight, behavior:'smooth'});});
document.getElementById('enquireBtn').addEventListener('click', ()=>{ window.location.href = 'contact.html';});
document.getElementById('startNow').addEventListener('click', ()=>{ window.location.href = 'contact.html';});

/* ---------- THREE.JS SCENE (interactive crane) ---------- */
const canvas = document.getElementById('three-canvas');
const renderer = new THREE.WebGLRenderer({canvas, antialias:true, alpha:true});
renderer.setClearColor(0x000000, 0); // transparent
// Mobile optimization: lower DPR
const isMobile = /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);
renderer.setPixelRatio(Math.min(1.5, window.devicePixelRatio));
renderer.setSize(canvas.clientWidth, canvas.clientHeight, false);

const scene = new THREE.Scene();

// camera
const camera = new THREE.PerspectiveCamera(45, 2, 0.1, 2000);
camera.position.set(0, 6, 12);

// lights
const hemi = new THREE.HemisphereLight(0xffffff, 0x444444, 0.7);
scene.add(hemi);
const dir = new THREE.DirectionalLight(0xffffff, 0.9);
dir.position.set(5, 10, 7);
dir.castShadow = true;
scene.add(dir);

// ground plane (grid)
const grid = new THREE.GridHelper(60, 60, 0x202840, 0x151828);
grid.material.opacity = 0.12;
grid.material.transparent = true;
scene.add(grid);

// simple ambient fog
scene.fog = new THREE.FogExp2(0x071021, 0.02);

// BUILD a simple low-poly crane using boxes
const matSteel = new THREE.MeshStandardMaterial({color:0xe6eef8, metalness:0.2, roughness:0.6});
const matAccent = new THREE.MeshStandardMaterial({color:0xffb84d, metalness:0.6, roughness:0.3});

// base
const baseGeo = new THREE.BoxGeometry(4,0.6,2.4);
const base = new THREE.Mesh(baseGeo, matSteel);
base.position.set(0,0.3,0);
scene.add(base);

// tower
const towerGroup = new THREE.Group();
const towerSeg = (h, y)=> {
  const g = new THREE.BoxGeometry(0.5, h, 0.5);
  const m = new THREE.Mesh(g, matSteel);
  m.position.y = y;
  return m;
};
for(let i=0;i<6;i++){
  const seg = towerSeg(1, 0.6 + i*1);
  seg.position.x = -1;
  towerGroup.add(seg);
}
towerGroup.position.set(-1,0,0);
scene.add(towerGroup);

// jib (arm)
const jib = new THREE.Group();
// pivot
const pivot = new THREE.Object3D();
pivot.position.set(-0.6,5.5,0);
scene.add(pivot);

// mast arm
const arm = new THREE.Mesh(new THREE.BoxGeometry(7,0.28,0.28), matAccent);
arm.position.set(3.0,0,0);
pivot.add(arm);

// counterweight
const counter = new THREE.Mesh(new THREE.BoxGeometry(1.0,0.6,0.8), matSteel);
counter.position.set(-0.5,0,0);
pivot.add(counter);

// hook and rope group
const hookGroup = new THREE.Group();
hookGroup.position.set(7, 0, 0);
pivot.add(hookGroup);

const rope = new THREE.Mesh(new THREE.BoxGeometry(0.06, 1.8,0.06), matSteel);
rope.position.set(0,-0.9,0);
hookGroup.add(rope);
const hook = new THREE.Mesh(new THREE.BoxGeometry(0.3,0.15,0.6), matAccent);
hook.position.set(0,-1.6,0);
hookGroup.add(hook);

// small moving blocks to lift
const blockGeo = new THREE.BoxGeometry(0.9,0.9,0.9);
const blocks = [];
for(let i=0;i<4;i++){
  const b = new THREE.Mesh(blockGeo, new THREE.MeshStandardMaterial({color:0xcdd9e6}));
  b.position.set(2.2 + i*0.8, 0.45, (i%2?0.9:-0.9));
  scene.add(b);
  blocks.push(b);
}

// subtle floating panels (decor)
for(let i=0;i<6;i++){
  const p = new THREE.Mesh(new THREE.BoxGeometry(1.2,0.02,0.8), new THREE.MeshStandardMaterial({color:0x102134,transparent:true,opacity:0.6}));
  p.position.set(-3 + i*1.2, 2 + (i%2)*0.4, -2 + (i%3)*0.9);
  p.rotation.y = i*0.25;
  scene.add(p);
}

// orbit controls (limited)
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.maxPolarAngle = Math.PI * 0.45;
controls.minDistance = 6;
controls.maxDistance = 28;
controls.enablePan = false;
controls.rotateSpeed = 0.6;

// reduce interactions on small screens
if(isMobile){
  controls.enableZoom = false;
  controls.autoRotate = true;
  controls.autoRotateSpeed = 0.6;
}

// resize handling
function resizeRenderer() {
  const width = canvas.clientWidth || canvas.parentElement.clientWidth;
  const height = canvas.clientHeight || canvas.parentElement.clientHeight;
  renderer.setSize(width, height, false);
  camera.aspect = width / height;
  camera.updateProjectionMatrix();
}
new ResizeObserver(resizeRenderer).observe(canvas);

// animation loop
let last = 0;
function animate(t){
  const now = t * 0.001;
  const dt = now - last;
  last = now;

  // slow sway of crane
  pivot.rotation.z = Math.sin(now * 0.5) * 0.08;
  // move hook up & down
  hookGroup.position.y = Math.sin(now*1.6) * 0.6;

  // blocks subtle bob
  blocks.forEach((b, i)=>{
    b.position.y = 0.45 + Math.abs(Math.sin(now*0.8 + i*0.6)) * 0.35;
    b.rotation.y += dt * 0.1 * (i+1);
  });

  controls.update();
  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

/* Performance safeguards: stop rendering when out of view (tab hidden or scrolled past hero) */
let visible = true;
const obs = new IntersectionObserver(entries=>{
  visible = entries[0].isIntersecting;
  if(visible) requestAnimationFrame(animate);
}, {threshold: 0.1});
obs.observe(document.getElementById('stage'));

// pause renderer when page hidden
document.addEventListener('visibilitychange', () => {
  if (document.hidden) renderer.setAnimationLoop(null);
  else requestAnimationFrame(animate);
});

/* Touch hint on mobile */
if(isMobile){
  const hint = document.createElement('div');
  hint.style.position='absolute';
  hint.style.left='50%';
  hint.style.bottom='18px';
  hint.style.transform='translateX(-50%)';
  hint.style.background='rgba(0,0,0,0.4)';
  hint.style.padding='8px 12px';
  hint.style.borderRadius='12px';
  hint.style.fontSize='13px';
  hint.style.color='#fff';
  hint.style.zIndex='50';
  hint.textContent = 'Tap & drag to rotate • Auto-rotate enabled';
  document.getElementById('stage').appendChild(hint);
  setTimeout(()=>hint.remove(), 4500);
}

/* Accessibility: keyboard control to focus canvas */
canvas.setAttribute('tabindex','0');
canvas.addEventListener('focus', ()=>{ controls.enabled = true })
canvas.addEventListener('blur', ()=>{ controls.enabled = false })

/* graceful fallback: if WebGL not supported, show static hero image */
function webglAvailable() {
  try {
    const canvas = document.createElement('canvas');
    return !!window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl'));
  } catch(e){ return false; }
}
if(!webglAvailable()){
  document.getElementById('three-canvas').style.display = 'none';
  const stage = document.getElementById('stage');
  stage.style.backgroundImage = "url('https://images.unsplash.com/photo-1581092334651-ddf0e20d7d3d?q=80&w=1600&auto=format&fit=crop')";
  stage.style.backgroundSize = 'cover';
  stage.style.backgroundPosition = 'center';
}

/* Lazy reveal animations for cards */
const ioCards = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) entry.target.classList.add('show');
  });
},{threshold:0.25});
document.querySelectorAll('.card.reveal').forEach(c=>ioCards.observe(c));

</script>
</body>
</html>
